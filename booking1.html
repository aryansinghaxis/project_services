<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Booking</title>
    <link rel="stylesheet" href="styles.css">
</head>
<style>
    body{font-family : Arial, sans-serif;
      background-color: black;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
  }
  
  .booking-container {
      background-color: transparent;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      width: 400px;
      color: white;

  }
  
  h1 {
      text-align: center;
      margin-bottom: 20px;
      
  }
  
  .form-group {
      margin-bottom: 15px;
  }
  
  label {
      display: block;
      margin-bottom: 5px;
  }
  
  input, select, textarea {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
  }
  
  button {
      width: 100%;
      padding: 10px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
  }
  
  button:hover {
      background-color: #218838;
  }
  
  .hidden {
      display: none;
  }
  
  #confirmation-message {
      text-align: center;
  }
  </style>
</head>
<body>
    <div class="booking-container">
        <h1>Book Your Service</h1>

        <form id="booking-form">
            <!-- Service Selection -->
            <div class="form-group">
                <label for="service">Select Service:</label>
                <select id="service" name="service" required>
                    <option value="" disabled selected>Select a service</option>
                    <option value="cleaning">Cleaning</option>
                    <option value="plumbing">Plumbing</option>
                    <option value="electrical">Electrical</option>
                </select>
            </div>

            <!-- Date Selection -->
            <div class="form-group">
                <label for="date">Preferred Date:</label>
                <input type="date" id="datex" name="date" required>
            </div>

            <!-- Time Slot Selection -->
            <div class="form-group">
                <label for="time-slot">Preferred Time Slot:</label>
                <select id="timeslot" name="time-slot" required>
                    <option value="" disabled selected>Select a time slot</option>
                    <option value="morning">Morning (9 AM - 12 PM)</option>
                    <option value="afternoon">Afternoon (12 PM - 3 PM)</option>
                    <option value="evening">Evening (3 PM - 6 PM)</option>
                </select>
            </div>

            <!-- User Information -->
            <div class="form-group">
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" required>
            </div>

            <div class="form-group">
                <label for="address">Address:</label>
                <textarea id="address" name="address" rows="3" required></textarea>
            </div>

            <!-- Submit Button -->
            <button onclick="bookService()" type="submit">Book Now</button>
        </form>

        <!-- Confirmation Message -->
        <div id="confirmation-message" class="hidden">
            <h2>Thank you for your booking!</h2>
            <p>Your service request has been submitted successfully.</p>
            <button id="new-booking">Make another booking</button>
        </div>
    </div>
    <script>
        function bookService() {
            const service = document.getElementById('service').value;
            const address = document.getElementById('address').value;
            const phone = document.getElementById('phone').value;
            const name = document.getElementById('name').value;
            const timeslot = document.getElementById('timeslot').value;
            const datex = document.getElementById('datex').value;

            event.preventDefault();
              // Prepare the data to be sent
              const data = {
                Service: service,
                PreferredDate: datex,
                FullName: name,
                PhoneNumber: phone,
                TimeSlot: timeslot,
                Address: address,
                EmailId: sessionStorage.getItem("Email")
              };
              //alert(JSON.stringify(data));
              // Send data to the API using fetch
              fetch('http://127.0.0.1:8000/api/apiServiceBooking/', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(data)
                  
              })
              .then(response => response.json())
              .then(data => {
                  console.log('Success:', data);
    
                  alert(data["ErrorMessage"]);
                  window.location.href='userdasboard.html';
    
              })
              .catch((error) => {
                  console.log('Error:', error);
                  alert('Failed to send message.');
              });
            }
    </script>
    

    <script src="aryan.js"></script>
</body>
</html>
