<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Sign up </title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Styles for the popup div */
    #qrPopup {
        display: none;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        border: 1px solid #ccc;
        padding: 20px;
        background: white;
        z-index: 1000;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    }
    #overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }
    button {
        margin-top: 20px;
    }
</style>
</head>
<body>
<!-- partial:index.partial.html -->
<script>
function submitForm(event) {
          
  event.preventDefault();
  document.getElementById('contactForm').addEventListener('submit', function(event) {
    // Get form values
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const message = document.getElementById('message').value;

    // Prepare the data to be sent
    const data = {
        Name: name,
        Email: email,
        Message: message
    };
    alert(JSON.stringify(data));
    // Send data to the API using fetch
    fetch('http://127.0.0.1:8000/api/apiSignIn/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data => {
        console.log('Success:', data);
        alert('Message sent successfully!');
    })
    .catch((error) => {
        console.log('Error:', error);
        alert('Failed to send message.');
    });
});
}


</script> 
<section>

    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
</section>
<section>
    <div class="signup">
      <form onsubmit="submitSignUpForm(event)" id="SignUpForm" method="post">
      <div class="content"> 
        <h2> Sign UP </h2>
        <div class="form">
          <div class="inputBox">
            <input id="Name" type="text" required>
            <i>Name</i>
          </div>
          <div class="inputBox">
            <input id="Phone" type="number" required>
            <i>Phone number</i>
          </div>
          <div class="inputBox">
            <input id="Email" type="text" required>
            <i>Email</i>
          </div>
          <!-- <div class="inputBox">
            <input id="Password" type="password" required>
            <i>Password</i>
          </div> -->
          <div class="inputBox">
            <input id="Address" type="text"  required>
            <i>Address</i>
          </div>
          <div class="inputBox">
            <input id="City" type="text" required>
            <i>City</i>
          </div>
          <div class="inputBox">
            <input id="State" type="text" required>
            <i>State</i>
          </div>
          <div class="inputBox">
            <input id="Pincode" type="number" required>
            <i>Pincode</i>
          </div>
          <div class="inputBox">
            <input type="submit" value="Register">
          </div>
        </div>
      </div>
    </form>
    </div>
    <div id="overlay"></div>
    <div id="qrPopup">
      <div id="qrcode"></div>
      <button  onclick="closePopup()">Close</button>
  </div>
  </section>
<!-- partial -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
  function submitSignUpForm(event) {
      
      event.preventDefault();
      document.getElementById('SignUpForm').addEventListener('submit', function(event) {
        // Get form values
        const Name = document.getElementById("Name").value;
        const Phone = document.getElementById("Phone").value;
        const Email = document.getElementById("Email").value;
        const Password = "";
        const Address = document.getElementById("Address").value;
        const City = document.getElementById("City").value;
        const State = document.getElementById("State").value;
        const Pincode = document.getElementById("Pincode").value;

        document.getElementById("Name").value = "";
        document.getElementById("Phone").value = "";
        document.getElementById("Email").value = "";
        //document.getElementById("Password").value = "";
        document.getElementById("Address").value = "";
        document.getElementById("City").value = "";
        document.getElementById("State").value = "";
        document.getElementById("Pincode").value = "";
      // Prepare the data to be sent
      data = {
        Name : Name,
        Phone_no : Phone,
        Email : Email,
        Password : Password,
        Address : Address,
        City : City,
        State : State,
        Pincode : Pincode
      };

        fetch('http://127.0.0.1:8000/api/apiSignIn/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => {
          
            console.log('Success:', data);
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('qrPopup').style.display = 'block';
            var qrCodeDiv = document.getElementById('qrcode');
            qrCodeDiv.innerHTML = "";
            var qrcode = new QRCode(qrCodeDiv, {
                text: data["QRCodeData"],
                width: 128,
                height: 128
            });
            


            //var qrcode = new QRCode("qrcode");
            //qrcode.makeCode(data["QRCodeData"]);
        })
        .catch((error) => {
            console.log('Error:', error);
            alert('Failed to send message.');
        });
    });

}
          function closePopup() {
                
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('qrPopup').style.display = 'none';
            }


</script>
</body>
</html>